"""프롬프트 중앙 관리"""

UNFAIR_TYPE_PROMPT = """다음 약관 조항이 '공정'한지 '불공정'한지 판단하세요:

    [약관 조항]
    {clause}

    [작업]
    1. 이 조항이 '공정'한지 '불공정'한지 판단하세요.
    2. '불공정'할 경우, 아래 [불공정 유형] 중 가장 적절한 것을 하나 선택하세요.
    3. '공정'할 경우, '공정'이라고만 답하세요.

    [불공정 유형]
    - '1. 서비스 일방적 변경·중단'
    - '2. 기한의 이익 상실'
    - '3. 고객 권리 제한'
    - '4. 통지·고지 부적절'
    - '5. 계약 해지·변경 사유 포괄적'
    - '6. 비용 과다 부과·환급 제한'
    - '7. 면책·책임 전가'
    - '8. 기타 불공정 약관'

    각 '불공정 유형'의 분류 기준은 다음과 같습니다.
    
    [분류 기준]
    1.  **서비스 일방적 변경·중단**
        * 고객의 동의나 명확한 사전 고지 없이 사업자가 일방적으로 서비스(부가서비스 포함) 내용을 변경, 축소, 중단하는 조항.
        * "제휴사 사정", "경영상의 이유" 등 포괄적이고 추상적인 이유로 서비스를 변경할 수 있도록 한 조항.
        * 고객 동의 없이 이용 한도를 임의로 조정(증액/감액)하는 조항.

    2.  **기한의 이익 상실**
        * 고객이 대출금 등을 만기 전에 즉시 상환해야 하는 사유(기한 이익 상실)를 부당하게 규정한 조항.
        * '1회 연체' 등 경미한 사유나 '가압류/가처분' 같이 임시적인 조치를 기한 이익 상실 사유로 정한 조항.
        * 기한 이익 상실 전, 고객에게 시정 기회를 주는 '사전 통지'나 '독촉' 절차 없이 즉시 효력이 발생하도록 한 조항.
        * "신용도 악화 판단 시" 등 사업자의 자의적/포괄적 판단을 근거로 한 조항.

    3.  **고객 권리 제한**
        * 고객의 법률상 권리(항변권, 상계권, 이의제기권 등)를 상당한 이유 없이 배제하거나 제한하는 조항.
        * 이의제기나 신고 방법을 '서면'으로만 한정하여 고객의 편의를 부당하게 제한하는 조항.
        * 변제 충당 순서(채무 상환 순서)를 고객에게 불리하게 사업자가 임의로 정하는 조항.
        * 법률상 보장된 권리(예: 세금 분납 신청권)를 포기하도록 하는 조항.

    4.  **통지·고지 부적절**
        * 수수료 부과, 약관 변경 등 고객의 권익에 중대한 영향을 미치는 사항을 고지하는 방식이 부적절한 조항.
        * 고객이 상시 확인하기 어려운 '홈페이지 게시', '모바일 앱 게재'나 수신 거부율이 높은 '앱 푸시(PUSH)' 등을 개별 통지 수단으로 규정한 조항.
        * "고객 연락처가 유효하지 않으면 통지하지 않는다"와 같이 사업자의 통지 의무를 부당하게 면제하는 조항.

    5.  **계약 해지·변경 사유 포괄적**
        * "기타 상당한 이유", "본 약관 위배", "부당한 거래" 등 계약 해지/변경 사유가 추상적이거나 포괄적이어서 사업자가 자의적으로 해석할 여지를 둔 조항.

    6.  **비용 과다 부과·환급 제한**
        * 연회비, 선불카드 잔액 등의 환급을 부당하게 제한하거나 불가능하게 한 조항.
        * 이자 외에 '취급수수료', '영업비수수료' 등 명목이 불분명한 비용을 추가로 부과하는 조항.
        * 고객의 귀책 사유가 없음에도(예: 100% 타인 과실 사고) 위약금이나 규정 손해금을 부과하는 조항.
        * 포인트 사용이 제한된 기간에도 소멸시효가 진행되도록 하여 고객의 재산상 권리(포인트)를 소멸시키는 조항.

    7.  **면책·책임 전가**
        * 사업자의 고의나 '경과실'로 인한 손해에 대해서도 사업자가 책임을 지지 않는다는(면책) 조항.
        * '시스템 장애', '전산 오류' 등 사업자의 관리 영역에 속하는 문제까지 불가항력으로 규정하여 면책하는 조항.
        * 비밀번호 유출, 개인정보 유출, 제휴사 문제 등 발생 시 사업자의 책임을 고객에게 떠넘기거나 부당하게 면제하는 조항.

    8.  **기타 불공정 약관**
        * 위 1~7번 분류에 명확히 속하지 않는 불공정 조항.
        * (예: 부당한 재판관할 합의, 고객 의사 확인 없는 계약 자동 연장, 인지세 고객 전가, 개인정보 포괄적 수집/활용 동의, 약관의 불리한 소급 적용)
    
    [출력 형식]
    불공정한 경우: 불공정 (선택한 유형, 선택한 유형이 정답이라는 확신도%)
    공정한 경우: 공정
    
    [중요!]
    '판단 근거'나 '추가 설명' 없이, 위의 [출력 형식]에 맞는 '결과 한 줄'만 정확히 출력하세요.

    [판단 결과]
    """

IMPROVEMENT_PROMPT_V1 = """당신은 법률 전문가입니다.

    [원본 약관 조항]
    {original_clause}

    [불공정 유형]
    {unfair_type}

    [관련 시정 사례 및 법령]
    {related_context}

    {feedback_context}

    [작업]
    1. [원본 약관 조항]을(를) [참고 자료]를 바탕으로 개선하세요.
    2. 원본에서 '삭제/수정'되어야 할 부분은 '~~삭제할 내용~~' (취소선)으로 표시하세요.
    3. 원본에 '추가'되어야 할 부분은 '**추가할 내용**' (굵게)으로 표시하세요.
    4. 원본에서 변경이 없는 부분은 그대로 두세요. (이 4가지 규칙을 조합하여 인라인 diff를 만드세요)
    5. 이 개선의 '핵심 변경 사항'을(를) Markdown 표로 요약하세요.

    **[중요!!]** 반드시 다음 마크다운 형식만 따르세요.
    '판단 근거', '추가 설명', '개선 사유' 등 지정되지 않은 항목을 절대 추가하지 마세요.
    
    [출력 형식]
    ### 3. 개선된 약관 조항
    (여기에 2, 3, 4번 규칙을 적용한 '인라인 diff' 텍스트를 작성)

    ### 4. 핵심 변경 사항
    | 변경 전 | 변경 후 |
    | --- | --- |
    | (변경 전 핵심 내용) | (변경 후 핵심 내용) |
    """
    
#FAIRNESS_PROMPT = """다음 약관 조항이 공정한지, 불공정한지 판단하세요:

#{clause}

#출력 형식: "공정" 또는 "불공정" 중 하나만 출력하세요.
#중요: 반드시 "공정" 또는 "불공정" 단어만 출력하고, 절대로 부연 설명이나 이유를 추가하지 마세요."""

#GEVAL_PROMPT = """당신은 금융 분야 약관 심사 전문가입니다.

#[평가 대상]
#원본: {original_clause}
#유형: {unfair_type}
#법령: {predicted_laws}
#사례: {similar_cases}
#개선안: {improvement_proposal}

#[정답]
#법령: {expected_laws}
#사례: {reference_case}

#[평가 항목 - 각 10점]

#1. 법령 선택 적절성
#2. 사례 활용도
#3. 개선안 구체성

#[출력]
#법령 적절성: [점수]/10
#사례 활용도: [점수]/10
#개선안 구체성: [점수]/10
#총점: [점수]/30

#평가 근거: [각 항목별 2-3문장]"""



#IMPROVEMENT_EVAL_PROMPT = """당신은 약관 심사 실무 담당자입니다.

#[평가 대상]
#원본 약관: {original_clause}
#개선안: {improvement_proposal}
#적용 법령: {laws}
#개선 사유: {reason}

#[평가 항목]
#다음 2가지 항목을 평가하세요.

#1. 개선안 실효성 (10점 만점)
#- 평가 기준: 이 개선안이 불공정성을 실제로 해소하는가?
#- 10점: 불공정성 완전 해소, 법령 요건 완벽 충족
#- 7-9점: 불공정성 대부분 해소, 일부 보완 필요
#- 4-6점: 부분적 해소, 핵심 문제 일부 미해결
#- 1-3점: 형식적 수정, 실질적 개선 미흡
#- 0점: 불공정성 해소 안 됨

#2. 실무 채택 가능성 (YES/NO)
#- 평가 기준: 수정 없이 바로 사용 가능한가?
#- YES 조건 (모두 충족):
#  * 법령 근거가 명확히 제시됨
#  * 구체적인 기한/절차/방법이 명시됨
#  * 문구가 명확하고 모호하지 않음
#  * 실무에서 즉시 적용 가능
#- NO 조건 (하나라도 해당):
#  * 법령 근거 불명확
#  * 추상적이거나 모호한 표현
#  * 실무 적용을 위해 추가 수정 필요

#[출력 형식]
#반드시 아래 JSON 형식으로만 답변하세요.
#{{
#  "effectiveness": {{
#    "score": 0-10 사이 정수,
#    "reason": "100자 이내 평가 근거"
#  }},
#  "adoptability": {{
#    "decision": "YES" 또는 "NO",
#    "reason": "100자 이내 판단 근거"
#  }}
#}}
#"""
    
## --- 현재 사용 프롬프트 지정 ---
#ACTIVE_FAIRNESS_PROMPT = FAIRNESS_PROMPT
ACTIVE_UNFAIR_TYPE_PROMPT = UNFAIR_TYPE_PROMPT
ACTIVE_IMPROVEMENT_PROMPT = IMPROVEMENT_PROMPT_V1
#ACTIVE_GEVAL_PROMPT = GEVAL_PROMPT
#ACTIVE_IMPROVEMENT_EVAL_PROMPT = IMPROVEMENT_EVAL_PROMPT